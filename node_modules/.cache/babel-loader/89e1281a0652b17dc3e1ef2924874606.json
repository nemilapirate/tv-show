{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Nemi/Desktop/react-show/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Nemi/Desktop/react-show/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Nemi/Desktop/react-show/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{TVShowAPI}from\"./api/tv-show\";import{BACKDROP_BASE_URL}from\"./config\";import s from\"./style.module.css\";import{TVShowDetail}from\"./components/TVShowDetail/TVShowDetail\";import{Logo}from\"./components/Logo/Logo\";import logo from\"./assets/images/logo.png\";import{TVShowList}from\"./components/TVShowList/TVShowList\";import{SearchBar}from\"./components/SearchBar/SearchBar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function App(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentTVShow=_useState2[0],setCurrentTVShow=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),recommendationList=_useState4[0],setRecommendationList=_useState4[1];function fetchPopulars(){return _fetchPopulars.apply(this,arguments);}function _fetchPopulars(){_fetchPopulars=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var populars;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return TVShowAPI.fetchPopulars();case 2:populars=_context.sent;if(populars.length>0){setCurrentTVShow(populars[0]);}case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchPopulars.apply(this,arguments);}function fetchRecommendations(_x){return _fetchRecommendations.apply(this,arguments);}function _fetchRecommendations(){_fetchRecommendations=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(tvShowId){var recommendations;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return TVShowAPI.fetchRecommendations(tvShowId);case 2:recommendations=_context2.sent;if(recommendations.length>0){setRecommendationList(recommendations.slice(0,10));}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchRecommendations.apply(this,arguments);}useEffect(function(){fetchPopulars();},[]);useEffect(function(){if(currentTVShow){fetchRecommendations(currentTVShow.id);}},[currentTVShow]);function searchTVShow(_x2){return _searchTVShow.apply(this,arguments);}function _searchTVShow(){_searchTVShow=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(tvShowName){var searchResponse;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return TVShowAPI.fetchByTitle(tvShowName);case 2:searchResponse=_context3.sent;if(searchResponse.length>0){setCurrentTVShow(searchResponse[0]);}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _searchTVShow.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:s.main_container,style:{background:currentTVShow?\"linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.55)), url(\\\"\".concat(BACKDROP_BASE_URL).concat(currentTVShow.backdrop_path,\"\\\") no-repeat center / cover\"):\"black\"},children:[/*#__PURE__*/_jsx(\"div\",{className:s.header,children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(Logo,{image:logo,title:\"Keskonregarde\",subtitle:\"Recherche une s\\xE9rie \\xE0 regarder\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12 col-lg-4\",children:/*#__PURE__*/_jsx(SearchBar,{onSubmit:searchTVShow})})]})}),/*#__PURE__*/_jsx(\"div\",{className:s.tv_show_details,children:currentTVShow&&/*#__PURE__*/_jsx(TVShowDetail,{tvShow:currentTVShow})}),/*#__PURE__*/_jsx(\"div\",{className:s.recommended_shows,children:recommendationList&&recommendationList.length>0&&/*#__PURE__*/_jsx(TVShowList,{onClickItem:setCurrentTVShow,tvShowList:recommendationList})})]});}","map":{"version":3,"names":["useEffect","useState","TVShowAPI","BACKDROP_BASE_URL","s","TVShowDetail","Logo","logo","TVShowList","SearchBar","App","currentTVShow","setCurrentTVShow","recommendationList","setRecommendationList","fetchPopulars","populars","length","fetchRecommendations","tvShowId","recommendations","slice","id","searchTVShow","tvShowName","fetchByTitle","searchResponse","main_container","background","backdrop_path","header","tv_show_details","recommended_shows"],"sources":["C:/Users/Nemi/Desktop/react-show/src/App.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { TVShowAPI } from \"./api/tv-show\";\nimport { BACKDROP_BASE_URL } from \"./config\";\nimport s from \"./style.module.css\";\nimport { TVShowDetail } from \"./components/TVShowDetail/TVShowDetail\";\nimport { Logo } from \"./components/Logo/Logo\";\nimport logo from \"./assets/images/logo.png\";\nimport { TVShowList } from \"./components/TVShowList/TVShowList\";\nimport { SearchBar } from \"./components/SearchBar/SearchBar\";\n\nexport function App() {\n  const [currentTVShow, setCurrentTVShow] = useState();\n  const [recommendationList, setRecommendationList] = useState([]);\n\n  async function fetchPopulars() {\n    const populars = await TVShowAPI.fetchPopulars();\n    if (populars.length > 0) {\n      setCurrentTVShow(populars[0]);\n    }\n  }\n\n  async function fetchRecommendations(tvShowId) {\n    const recommendations = await TVShowAPI.fetchRecommendations(\n      tvShowId\n    );\n    if (recommendations.length > 0) {\n      setRecommendationList(recommendations.slice(0, 10));\n    }\n  }\n\n  useEffect(() => {\n    fetchPopulars();\n  }, []);\n\n  useEffect(() => {\n    if (currentTVShow) {\n      fetchRecommendations(currentTVShow.id);\n    }\n  }, [currentTVShow]);\n\n  async function searchTVShow(tvShowName) {\n    const searchResponse = await TVShowAPI.fetchByTitle(tvShowName);\n    if (searchResponse.length > 0) {\n      setCurrentTVShow(searchResponse[0]);\n    }\n  }\n  return (\n    <div\n      className={s.main_container}\n      style={{\n        background: currentTVShow\n          ? `linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.55)), url(\"${BACKDROP_BASE_URL}${currentTVShow.backdrop_path}\") no-repeat center / cover`\n          : \"black\",\n      }}\n    >\n      <div className={s.header}>\n        <div className=\"row\">\n          <div className=\"col-4\">\n            <Logo\n              image={logo}\n              title=\"Keskonregarde\"\n              subtitle=\"Recherche une série à regarder\"\n            />\n          </div>\n          <div className=\"col-md-12 col-lg-4\">\n            <SearchBar onSubmit={searchTVShow} />\n          </div>\n        </div>\n      </div>\n      <div className={s.tv_show_details}>\n        {currentTVShow && <TVShowDetail tvShow={currentTVShow} />}\n      </div>\n      <div className={s.recommended_shows}>\n        {recommendationList && recommendationList.length > 0 && (\n          <TVShowList\n            onClickItem={setCurrentTVShow}\n            tvShowList={recommendationList}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"kXAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,SAAT,KAA0B,eAA1B,CACA,OAASC,iBAAT,KAAkC,UAAlC,CACA,MAAOC,EAAP,KAAc,oBAAd,CACA,OAASC,YAAT,KAA6B,wCAA7B,CACA,OAASC,IAAT,KAAqB,wBAArB,CACA,MAAOC,KAAP,KAAiB,0BAAjB,CACA,OAASC,UAAT,KAA2B,oCAA3B,CACA,OAASC,SAAT,KAA0B,kCAA1B,C,wFAEA,MAAO,SAASC,IAAT,EAAe,CACpB,cAA0CT,QAAQ,EAAlD,wCAAOU,aAAP,eAAsBC,gBAAtB,eACA,eAAoDX,QAAQ,CAAC,EAAD,CAA5D,yCAAOY,kBAAP,eAA2BC,qBAA3B,eAFoB,QAILC,cAJK,mJAIpB,wKACyBb,UAAS,CAACa,aAAV,EADzB,QACQC,QADR,eAEE,GAAIA,QAAQ,CAACC,MAAT,CAAkB,CAAtB,CAAyB,CACvBL,gBAAgB,CAACI,QAAQ,CAAC,CAAD,CAAT,CAAhB,CACD,CAJH,sDAJoB,wDAWLE,qBAXK,0KAWpB,kBAAoCC,QAApC,mKACgCjB,UAAS,CAACgB,oBAAV,CAC5BC,QAD4B,CADhC,QACQC,eADR,gBAIE,GAAIA,eAAe,CAACH,MAAhB,CAAyB,CAA7B,CAAgC,CAC9BH,qBAAqB,CAACM,eAAe,CAACC,KAAhB,CAAsB,CAAtB,CAAyB,EAAzB,CAAD,CAArB,CACD,CANH,wDAXoB,uDAoBpBrB,SAAS,CAAC,UAAM,CACde,aAAa,GACd,CAFQ,CAEN,EAFM,CAAT,CAIAf,SAAS,CAAC,UAAM,CACd,GAAIW,aAAJ,CAAmB,CACjBO,oBAAoB,CAACP,aAAa,CAACW,EAAf,CAApB,CACD,CACF,CAJQ,CAIN,CAACX,aAAD,CAJM,CAAT,CAxBoB,QA8BLY,aA9BK,mJA8BpB,kBAA4BC,UAA5B,kKAC+BtB,UAAS,CAACuB,YAAV,CAAuBD,UAAvB,CAD/B,QACQE,cADR,gBAEE,GAAIA,cAAc,CAACT,MAAf,CAAwB,CAA5B,CAA+B,CAC7BL,gBAAgB,CAACc,cAAc,CAAC,CAAD,CAAf,CAAhB,CACD,CAJH,wDA9BoB,+CAoCpB,mBACE,aACE,SAAS,CAAEtB,CAAC,CAACuB,cADf,CAEE,KAAK,CAAE,CACLC,UAAU,CAAEjB,aAAa,sEACwCR,iBADxC,SAC4DQ,aAAa,CAACkB,aAD1E,iCAErB,OAHC,CAFT,wBAQE,YAAK,SAAS,CAAEzB,CAAC,CAAC0B,MAAlB,uBACE,aAAK,SAAS,CAAC,KAAf,wBACE,YAAK,SAAS,CAAC,OAAf,uBACE,KAAC,IAAD,EACE,KAAK,CAAEvB,IADT,CAEE,KAAK,CAAC,eAFR,CAGE,QAAQ,CAAC,sCAHX,EADF,EADF,cAQE,YAAK,SAAS,CAAC,oBAAf,uBACE,KAAC,SAAD,EAAW,QAAQ,CAAEgB,YAArB,EADF,EARF,GADF,EARF,cAsBE,YAAK,SAAS,CAAEnB,CAAC,CAAC2B,eAAlB,UACGpB,aAAa,eAAI,KAAC,YAAD,EAAc,MAAM,CAAEA,aAAtB,EADpB,EAtBF,cAyBE,YAAK,SAAS,CAAEP,CAAC,CAAC4B,iBAAlB,UACGnB,kBAAkB,EAAIA,kBAAkB,CAACI,MAAnB,CAA4B,CAAlD,eACC,KAAC,UAAD,EACE,WAAW,CAAEL,gBADf,CAEE,UAAU,CAAEC,kBAFd,EAFJ,EAzBF,GADF,CAoCD"},"metadata":{},"sourceType":"module"}